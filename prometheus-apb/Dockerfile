FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"bmFtZTogcHJvbWV0aGV1cy1hcGIKaW1hZ2U6IHRvZGRic2FuZGVycy9wcm9tZXRoZXVzLWFwYgpk\
ZXNjcmlwdGlvbjogVGhpcyBBUEIgZGVwbG95cyBQcm9tZXRoZXVzIApiaW5kYWJsZTogRmFsc2UK\
YXN5bmM6IG9wdGlvbmFsCm1ldGFkYXRhOgogIGRvY3VtZW50YXRpb25Vcmw6IGh0dHBzOi8vcHJv\
bWV0aGV1cy5pby8KICBpbWFnZVVybDogaHR0cHM6Ly9naXRodWIuY29tL3Byb21ldGhldXMvcHJv\
bWV0aGV1cy5naXRodWIuaW8vYmxvYi9tYXN0ZXIvYXNzZXRzL3Byb21ldGhldXNfbG9nby1jYjU1\
YmI1YzM0Ni5wbmc/cmF3PXRydWUKICBkZXBlbmRlbmNpZXM6IFsncHJvbS9wcm9tZXRoZXVzOnYx\
LjcuMSddCiAgZGlzcGxheU5hbWU6IFByb21ldGhldXMgKEFQQikKcGxhbnM6CiAgLSBuYW1lOiBk\
ZWZhdWx0CiAgICBkZXNjcmlwdGlvbjogVGhpcyBwbGFuIGRlcGxveXMgYSBzaW5nbGUgUHJvbWV0\
aGV1cyBzZXJ2ZXIgCiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YTogCiAgICAgICAgZGlzcGxh\
eU5hbWU6IERlZmF1bHQKICAgICAgICBsb25nRGVzY3JpcHRpb246IFRoaXMgcGxhbiBwcm92aWRl\
cyBhIHNpbmdsZSBQcm9tZXRoZXVzIHNlcnZlciAKICAgICAgICBjb3N0OiAkMC4wMAogICAgcGFy\
YW1ldGVyczoKICAgICAgLSBuYW1lOiBwcm9tZXRoZXVzX3ZlcnNpb24KICAgICAgICBkZWZhdWx0\
OiBsYXRlc3QKICAgICAgICBlbnVtOiBbJ2xhdGVzdCcsICd2MS43LjEnXQogICAgICAgIHR5cGU6\
IGVudW0KICAgICAgICB0aXRsZTogUHJvbWV0aGV1cyBWZXJzaW9uCiAgICAgICAgcmVxdWlyZWQ6\
IFRydWUK"



COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
