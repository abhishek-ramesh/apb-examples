FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"bmFtZTogcHJvbWV0aGV1cy1hcGIKaW1hZ2U6IHRvZGRic2FuZGVycy9wcm9tZXRoZXVzLWFwYgpk\
ZXNjcmlwdGlvbjogVGhpcyBBUEIgZGVwbG95cyBQcm9tZXRoZXVzIAp0YWdzOgogIC0gTW9uaXRv\
cmluZyAKYmluZGFibGU6IEZhbHNlCmFzeW5jOiBvcHRpb25hbAptZXRhZGF0YToKICBkb2N1bWVu\
dGF0aW9uVXJsOiBodHRwczovL3Byb21ldGhldXMuaW8vCiAgaW1hZ2VVcmw6IGh0dHBzOi8vZ2l0\
aHViLmNvbS9wcm9tZXRoZXVzL3Byb21ldGhldXMuZ2l0aHViLmlvL2Jsb2IvbWFzdGVyL2Fzc2V0\
cy9wcm9tZXRoZXVzX2xvZ28tY2I1NWJiNWMzNDYucG5nP3Jhdz10cnVlCiAgZGVwZW5kZW5jaWVz\
OiBbJ3Byb20vcHJvbWV0aGV1czp2MS43LjEnXQogIGRpc3BsYXlOYW1lOiBQcm9tZXRoZXVzIChB\
UEIpCnBsYW5zOgogIC0gbmFtZTogZGVmYXVsdAogICAgZGVzY3JpcHRpb246IFRoaXMgcGxhbiBk\
ZXBsb3lzIGEgc2luZ2xlIFByb21ldGhldXMgc2VydmVyIAogICAgZnJlZTogVHJ1ZQogICAgbWV0\
YWRhdGE6IAogICAgICAgIGRpc3BsYXlOYW1lOiBEZWZhdWx0CiAgICAgICAgbG9uZ0Rlc2NyaXB0\
aW9uOiBUaGlzIHBsYW4gcHJvdmlkZXMgYSBzaW5nbGUgUHJvbWV0aGV1cyBzZXJ2ZXIgCiAgICAg\
ICAgY29zdDogJDAuMDAKICAgIHBhcmFtZXRlcnM6CiAgICAgIC0gbmFtZTogcHJvbWV0aGV1c192\
ZXJzaW9uCiAgICAgICAgZGVmYXVsdDogbGF0ZXN0CiAgICAgICAgZW51bTogWydsYXRlc3QnLCAn\
djEuNy4xJ10KICAgICAgICB0eXBlOiBlbnVtCiAgICAgICAgdGl0bGU6IFByb21ldGhldXMgVmVy\
c2lvbgogICAgICAgIHJlcXVpcmVkOiBUcnVlCg=="



COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
